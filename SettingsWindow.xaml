<Window x:Class="AppsTime.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Настройки" 
        Height="600" Width="700"
        WindowStartupLocation="CenterOwner"
        Background="{x:Null}">

    <Grid>
        <Grid.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="{StaticResource WindowBackgroundStart}" Offset="0"/>
                <GradientStop Color="{StaticResource WindowBackgroundEnd}" Offset="0.511"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Label Grid.Row="0" 
               Content="Настройки приложения" 
               Foreground="{StaticResource TextPrimaryBrush}"
               FontSize="20" FontWeight="Bold"
               Margin="20,15,20,10"/>

        <!-- TabControl для вкладок -->
        <TabControl Grid.Row="1" Margin="20,10,20,10"
                    Background="{StaticResource PanelBackgroundBrush}"
                    Foreground="{StaticResource TextPrimaryBrush}">

            <!-- Вкладка 1: Цвета -->
            <TabItem Header="🎨 Цвета">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="5">

                            <!-- Основные цвета -->
                            <GroupBox Header="Основные цвета" 
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Margin="0,0,0,10">
                                <Grid Margin="10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Фон (начало):" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxWindowBackgroundStart" Grid.Row="0" Grid.Column="1" 
                                 Margin="5,5,10,5" Height="25"
                                 Background="{StaticResource TextBoxBackgroundBrush}"
                                 Foreground="{StaticResource TextBoxTextBrush}"
                                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderWindowBackgroundStart" Grid.Row="0" Grid.Column="3" 
                                Height="25" Margin="5" 
                                BorderBrush="#FF606060" BorderThickness="1"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Фон (конец):" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxWindowBackgroundEnd" Grid.Row="1" Grid.Column="1" 
                                 Margin="5,5,10,5" Height="25"
                                 Background="{StaticResource TextBoxBackgroundBrush}"
                                 Foreground="{StaticResource TextBoxTextBrush}"
                                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderWindowBackgroundEnd" Grid.Row="1" Grid.Column="3" 
                                Height="25" Margin="5" 
                                BorderBrush="#FF606060" BorderThickness="1"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Выделение:" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxSelectedBackground" Grid.Row="2" Grid.Column="1" 
                                 Margin="5,5,10,5" Height="25"
                                 Background="{StaticResource TextBoxBackgroundBrush}"
                                 Foreground="{StaticResource TextBoxTextBrush}"
                                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderSelectedBackground" Grid.Row="2" Grid.Column="3" 
                                Height="25" Margin="5" 
                                BorderBrush="#FF606060" BorderThickness="1"/>
                                </Grid>
                            </GroupBox>

                            <!-- Цвета кнопок -->
                            <GroupBox Header="Цвета кнопок" 
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Margin="0,0,0,10">
                                <Grid Margin="10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Save (зелёная):" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxButtonSave" Grid.Row="0" Grid.Column="1" 
                                 Margin="5,5,10,5" Height="25"
                                 Background="{StaticResource TextBoxBackgroundBrush}"
                                 Foreground="{StaticResource TextBoxTextBrush}"
                                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderButtonSave" Grid.Row="0" Grid.Column="3" 
                                Height="25" Margin="5" 
                                BorderBrush="#FF606060" BorderThickness="1"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Exclude (красная):" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxButtonExclude" Grid.Row="1" Grid.Column="1" 
                                 Margin="5,5,10,5" Height="25"
                                 Background="{StaticResource TextBoxBackgroundBrush}"
                                 Foreground="{StaticResource TextBoxTextBrush}"
                                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderButtonExclude" Grid.Row="1" Grid.Column="3" 
                                Height="25" Margin="5" 
                                BorderBrush="#FF606060" BorderThickness="1"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Settings (синяя):" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxButtonInfo" Grid.Row="2" Grid.Column="1" 
                                 Margin="5,5,10,5" Height="25"
                                 Background="{StaticResource TextBoxBackgroundBrush}"
                                 Foreground="{StaticResource TextBoxTextBrush}"
                                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderButtonInfo" Grid.Row="2" Grid.Column="3" 
                                Height="25" Margin="5" 
                                BorderBrush="#FF606060" BorderThickness="1"/>
                                </Grid>
                            </GroupBox>

                            <!-- Цвета текста -->
                            <!-- Цвета текста -->
                            <GroupBox Header="Цвета текста" 
          Foreground="{StaticResource TextPrimaryBrush}"
          Margin="0,0,0,10">
                                <Grid Margin="10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="60"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <!-- 👇 Новая строка -->
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Основной:" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxTextPrimary" Grid.Row="0" Grid.Column="1" 
                 Margin="5,5,10,5" Height="25"
                 Background="{StaticResource TextBoxBackgroundBrush}"
                 Foreground="{StaticResource TextBoxTextBrush}"
                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderTextPrimary" Grid.Row="0" Grid.Column="3" 
                Height="25" Margin="5" 
                BorderBrush="#FF606060" BorderThickness="1"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Вторичный:" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxTextSecondary" Grid.Row="1" Grid.Column="1" 
                 Margin="5,5,10,5" Height="25"
                 Background="{StaticResource TextBoxBackgroundBrush}"
                 Foreground="{StaticResource TextBoxTextBrush}"
                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderTextSecondary" Grid.Row="1" Grid.Column="3" 
                Height="25" Margin="5" 
                BorderBrush="#FF606060" BorderThickness="1"/>

                                    <!-- 👇 Новый цвет для запущенных процессов -->
                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Запущенные:" VerticalAlignment="Center" Margin="0,5"/>
                                    <TextBox x:Name="TextBoxRunningProcessText" Grid.Row="2" Grid.Column="1" 
                 Margin="5,5,10,5" Height="25"
                 Background="{StaticResource TextBoxBackgroundBrush}"
                 Foreground="{StaticResource TextBoxTextBrush}"
                 BorderBrush="{StaticResource TextBoxBorderBrush}"
                 TextChanged="ColorTextBox_TextChanged"/>
                                    <Border x:Name="BorderRunningProcessText" Grid.Row="2" Grid.Column="3" 
                Height="25" Margin="5" 
                BorderBrush="#FF606060" BorderThickness="1"/>
                                </Grid>
                            </GroupBox>

                        </StackPanel>
                    </ScrollViewer>

                    <!-- Кнопки -->
                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                        <Button x:Name="ButtonResetColors" 
                    Content="🔄 Сбросить"
                    Width="120" Height="35" Margin="0,0,10,0"
                    Background="{StaticResource ButtonDefaultBrush}"
                    Foreground="{StaticResource ButtonTextBrush}"
                    BorderThickness="0"
                    Click="ButtonResetColors_Click"/>
                        <Button x:Name="ButtonApplyColors" 
                    Content="💾 Применить"
                    Width="130" Height="35"
                    Background="{StaticResource ButtonSaveBrush}"
                    Foreground="{StaticResource ButtonTextBrush}"
                    BorderThickness="0"
                    Click="ButtonApplyColors_Click"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- Вкладка 2: Исключённые приложения -->
            <TabItem Header="📋 Исключённые">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <ListBox x:Name="ListBoxExcluded" 
                             Grid.Row="0"
                             Background="{StaticResource ListBoxBackgroundBrush}"
                             Foreground="{StaticResource ListBoxTextBrush}"
                             BorderBrush="{StaticResource ListBoxBorderBrush}"
                             BorderThickness="1"
                             Margin="0,0,0,10"
                             SelectionChanged="ListBoxExcluded_SelectionChanged">
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Foreground" Value="{StaticResource ListBoxTextBrush}"/>
                                <Setter Property="Padding" Value="5,3"/>
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="{StaticResource SelectedBackgroundBrush}"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListBox.ItemContainerStyle>
                    </ListBox>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="ButtonRestore" 
                                Content="Восстановить" 
                                Width="110" Height="35" Margin="0,0,10,0"
                                Background="{StaticResource ButtonSaveBrush}"
                                Foreground="{StaticResource ButtonTextBrush}"
                                BorderThickness="0"
                                IsEnabled="False"
                                Click="ButtonRestore_Click"/>
                        <Button x:Name="ButtonClearAll" 
                                Content="Очистить все" 
                                Width="110" Height="35" Margin="0,0,10,0"
                                Background="{StaticResource ButtonExcludeBrush}"
                                Foreground="{StaticResource ButtonTextBrush}"
                                BorderThickness="0"
                                Click="ButtonClearAll_Click"/>
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Кнопки внизу -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,10,20,15">
            <Button x:Name="ButtonClose" 
                    Content="Закрыть" 
                    Width="110" Height="35"
                    Background="{StaticResource ButtonDefaultBrush}"
                    Foreground="{StaticResource ButtonTextBrush}"
                    BorderThickness="0"
                    Click="ButtonClose_Click"/>
        </StackPanel>
    </Grid>
</Window>